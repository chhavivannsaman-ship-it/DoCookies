
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<style>
  body { font-family: sans-serif; padding: 20px; }

  .environment-selector { position: relative; display: inline-block; }

  .env-select {
    padding: 6px 10px;
    font-size: 14px;
    cursor: pointer;
    min-width: 140px;
  }

  /* Custom dropdown */
  .custom-select { position: relative; display: inline-block; }

  .selected-display {
    padding: 6px 28px 6px 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    background: #fff;
    cursor: pointer;
    font-size: 14px;
    min-width: 140px;
    user-select: none;
    position: relative;
  }
  .selected-display::after {
    content: '▾';
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
  }

  .dropdown {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(0,0,0,.15);
    z-index: 100;
    min-width: 160px;
  }
  .dropdown.open { display: block; }

  .dropdown-item {
    padding: 8px 12px;
    cursor: pointer;
    font-size: 14px;
    white-space: nowrap;
    position: relative;
  }
  .dropdown-item:hover { background: #f0f0f0; }

  .dropdown-item.has-sub::after {
    content: '▸';
    position: absolute;
    right: 10px;
  }

  .submenu {
    display: none;
    position: absolute;
    left: 100%;
    top: 0;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-shadow: 0 2px 8px rgba(0,0,0,.15);
    min-width: 160px;
    z-index: 101;
  }
  .dropdown-item:hover .submenu { display: block; }

  .submenu-item {
    padding: 8px 12px;
    cursor: pointer;
    font-size: 14px;
    white-space: nowrap;
  }
  .submenu-item:hover { background: #f0f0f0; }

  #result { margin-top: 16px; font-size: 13px; color: #555; }
</style>
</head>
<body>

<div class="environment-selector">
  <div class="custom-select" id="customSelect">
    <div class="selected-display" id="selectedDisplay">Test</div>
    <div class="dropdown" id="dropdown">
      <div class="dropdown-item" data-value="test">Test</div>
      <div class="dropdown-item has-sub" data-value="dedicated">
        Dedicated
        <div class="submenu" id="dedicatedSubmenu">
          <div class="submenu-item" data-value="dedicated_aordcid7_42507">aordcid7 42507</div>
          <div class="submenu-item" data-value="dedicated_aordcid2_861">aordcid2 861</div>
          <div class="submenu-item" data-value="dedicated_aordcid2_42278">aordcid2 42278</div>
          <div class="submenu-item" data-value="dedicated_aordcid2_41780">aordcid2 41780</div>
        </div>
      </div>
      <div class="dropdown-item" data-value="staging">Staging</div>
      <div class="dropdown-item" data-value="canary">Canary</div>
    </div>
  </div>
</div>

<div id="result">Selected: <strong id="resultVal">test</strong></div>

<script>
  const display = document.getElementById('selectedDisplay');
  const dropdown = document.getElementById('dropdown');
  const resultVal = document.getElementById('resultVal');

  display.addEventListener('click', e => {
    dropdown.classList.toggle('open');
    e.stopPropagation();
  });

  document.querySelectorAll('.dropdown-item').forEach(item => {
    item.addEventListener('click', e => {
      // Only select if not a has-sub item (let submenu handle it)
      if (!item.classList.contains('has-sub')) {
        select(item.dataset.value, item.textContent.trim());
      }
      e.stopPropagation();
    });
  });

  document.querySelectorAll('.submenu-item').forEach(item => {
    item.addEventListener('click', e => {
      select(item.dataset.value, 'Dedicated: ' + item.textContent.trim());
      e.stopPropagation();
    });
  });

  document.addEventListener('click', () => dropdown.classList.remove('open'));

  function select(value, label) {
    display.textContent = label;
    display.style.paddingRight = '28px';
    // Re-add arrow via ::after — textContent clears it, so use a span
    resultVal.textContent = value;
    dropdown.classList.remove('open');
  }
</script>
</body>
</html>

